<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API 명세서</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
        }
        .api-container {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .api-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .method {
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
        }
        .get { background: #4CAF50; color: white; }
        .post { background: #2196F3; color: white; }
        .put { background: #FF9800; color: white; }
        .delete { background: #F44336; color: white; }
        .desc {
            margin-bottom: 10px;
        }
        .code-block {
            background: #272822;
            color: #f8f8f2;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <h1>API 명세서</h1>

    <div id="api-list">
        <!-- API 목록이 동적으로 추가됨 -->
    </div>

    <script>
        // API 명세 객체
        const apiSpec = [
            {
                path: "/api/login/kakao",
                method: "GET",
                description: "카카오 계정으로 사용자 인증을 진행하여 로그인합니다.",
                requestExample: `{code:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c}`,
                responseExample: `{
{ userId: 1 }
}`
            },
            {
                path: "/api/login",
                method: "GET",
                description: "쿠키 세션 ID를 읽어 로그인 세션을 확인합니다.",
                requestExample: ` `,
                responseExample: `{ userId: 1 }`
            },
            {
                path: "/api/login",
                method: "DELETE",
                description: "쿠키 세션 ID를 삭제하고 로그아웃합니다.",
                requestExample: ` `,
                responseExample: `{  userId: 1  }`
            },
            {
                path: "/api/llm/student",
                method: "POST",
                description: "(로그인해야 접근 가능)LLM을 호출하여 학생의 평가문 작성을 요청합니다. isLastQuestion이 true일 때 답장을 요청합니다",
                requestExample: `{ studentNumber: 3,
questionId: 5,
maxLength: 120,
isLastQuestion: true
}`,
                responseExample: `{ {response: "두자릿 수 덧셈의 받아올림이 있는 덧셈계산을 잘 계산하고 그 과정을 말할 수 있음." }}`
            },
            {
                path: "/api/llm/usages",
                method: "GET",
                description: "(로그인해야 접근 가능)사용자의 남은 LLM 토큰 사용량을 보여줍니다.",
                requestExample: `{ }`,
                responseExample: `{ response: 5000 }`
            },
            {
                path: "/api/question",
                method: "POST",
                description: "(로그인해야 접근 가능)새로운 수행평가 활동지를 등록합니다",
                requestExample: `{ subjectName: "국어",
title: "문학의 즐거움",
comment: "이 활동지는 학생들에게 음율 등의 문학적인 표현 요소들을 이해하고 있는지 평가함.",
content: "{국어과 수행평가지
5학년 반 번 이름( ).....(생략)"
correctAnswer: ["지난 토요일 커다란 호수", 3, "커다란 호수라는 표현을 할 떄에 커를 크고 길게 발음한 것이 큰 느낌을 강조하는 것 같아 실감나게 느꼈습니다"]
answerSheet: [{format: "input"}, {format:"select", counts: 5}, {format: "textarea"}]
}`,
                responseExample: `{  }`
            },

            {
                path: "/api/question",
                method: "GET",
                description: "(로그인해야 접근 가능)글을 수정하기 위해 선택한 수행평가 활동지를 내용을 가져옵니다",
                requestExample: `{ id: 5 }`,
                responseExample: `{id: 5,
subjectName: "국어",
title: "문학의 즐거움",
comment: "이 활동지는 학생들에게 음율 등의 문학적인 표현 요소들을 이해하고 있는지 평가함.",
content: "{국어과 수행평가지
5학년 반 번 이름( ).....(생략)"
correctAnswer: ["지난 토요일 커다란 호수", 3, "커다란 호수라는 표현을 할 떄에 커를 크고 길게 발음한 것이 큰 느낌을 강조하는 것 같아 실감나게 느꼈습니다"]
answerSheet: [{format: "input"}, {format:"select", counts: 5}, {format: "textarea"}]
}`
            },
            {
                path: "/api/question/list/:page/:subject?",
                method: "GET",
                description: "(로그인해야 접근 가능)작성한 수행평가 활동지 목록을 최신순으로 20개씩 가져옵니다",
                requestExample: `{  }`,
                responseExample: `[{ id: 3,
title: "문학의 즐거움",
date: "2025-03-03T23:10:00+09:00",
subject: "국어"},
{ id: 5,
title: "상상의 날개",
date: "2025-03-03T23:10:00+09:00",
subject: "국어"}
]`
            },

        ];

        // API 명세를 HTML에 추가하는 함수
        function renderApiDocs() {
            const apiList = document.getElementById("api-list");

            apiSpec.forEach(api => {
                const apiContainer = document.createElement("div");
                apiContainer.classList.add("api-container");

                const methodClass = api.method.toLowerCase();

                apiContainer.innerHTML = `
                    <div class="api-header">
                        <span>${api.path}</span>
                        <span class="method ${methodClass}">${api.method}</span>
                    </div>
                    <p class="desc">${api.description}</p>
                    <strong>요청 예시</strong>
                    <pre class="code-block">${api.requestExample}</pre>
                    <strong>응답 예시</strong>
                    <pre class="code-block">${api.responseExample}</pre>
                `;

                apiList.appendChild(apiContainer);
            });
        }

        // 페이지 로드 시 API 명세 렌더링
        window.onload = renderApiDocs;
    </script>

</body>
</html>
